---
name: review-code
description: コードレビューを実施する。PRの変更、ファイル変更、コードの品質チェックに使用する。
argument-hint: [file-or-directory]
context: fork
agent: Explore
allowed-tools: Bash(git diff *), Bash(git log *), Bash(gh pr *)
---

# コードレビュー

## 対象
$ARGUMENTS

## 現在のPR情報（PRがある場合）
!`gh pr diff --name-only 2>/dev/null || echo "PRなし: git diffで確認"`

## レビュー観点

以下の5つの観点で順番にレビューしてください。

### 1. 正確性
- ロジックの誤り、境界条件の見落とし
- nullやundefinedの未処理
- 非同期処理の競合状態

### 2. セキュリティ
- SQLインジェクション、XSS、コマンドインジェクション
- 機密情報のハードコード（APIキー、パスワード）
- 不適切なアクセス制御

### 3. パフォーマンス
- N+1クエリ、不要なループ内処理
- メモリリークの可能性
- 不要な再レンダリング（フロントエンド）

### 4. 可読性・保守性
- 命名の明確さ（変数名、関数名、クラス名）
- 関数の責務分離（1関数1責務）
- マジックナンバーの排除

### 5. テスト
- 変更箇所のテストカバレッジ
- エッジケースのテスト有無
- テストの可読性

## 出力形式

各観点について以下の形式で報告してください。

| 重要度 | ファイル:行 | 観点 | 指摘内容 | 修正案 |
|--------|-----------|------|---------|--------|
| HIGH/MEDIUM/LOW | path:line | 観点名 | 問題の説明 | 具体的な修正コード |

最後に、全体の評価サマリーを1段落で記述してください。
