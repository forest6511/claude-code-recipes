# レシピ74: バックグラウンド実行と結果監視（Ctrl+B）

Ctrl+Bでタスクをバックグラウンドに切り替え、複数のタスクを並行で管理します。バックグラウンド実行の制約、結果確認、Agent Teamsでの監視パターンを解説します。

## ファイル一覧

| ファイル | 説明 |
|---------|------|
| `prompts/background-usage.txt` | バックグラウンド実行の使い方と結果確認のプロンプト例 |
| `prompts/monitoring-patterns.txt` | Agent Teamsでの監視パターン（キーバインド一覧） |

## 使い方

```bash
# 方法1: 事前にバックグラウンド指定
> テストをバックグラウンドで実行して

# 方法2: 実行中にCtrl+Bで切り替え
# サブエージェントの実行中にCtrl+Bを押す

# バックグラウンドタスクを完全に無効化する場合
export CLAUDE_CODE_DISABLE_BACKGROUND_TASKS=1
```

## バックグラウンド実行の制約

| 適する | 適さない |
|--------|----------|
| テスト実行、リンター、静的解析 | DB接続が必要なE2Eテスト（MCPサーバーのツール不可） |
| ファイル検索、コードベース調査 | ユーザーの判断が必要な操作 |
| ドキュメント生成、コメント追加 | 権限の事前取得が困難な操作 |

## Agent Teamsの監視キーバインド

| キー | 動作 |
|------|------|
| Shift+上下 | チームメイトを選択して出力を確認 |
| Enter | チームメイトのセッションを展開 |
| Escape | チームメイトの現在のターンを中断 |
| Ctrl+T | タスクリスト表示 |

## 関連レシピ

- レシピ65「テスト実行とレポート集約（バックグラウンド実行）」
- レシピ69「Agent Teamsの基本」
- レシピ87「タスク完了時にデスクトップ/サウンド通知を自動送信する」
