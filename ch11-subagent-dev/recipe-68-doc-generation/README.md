# レシピ68: ドキュメント・コメント一括生成

ドキュメント生成専用のサブエージェントを定義し、ファイル単位で並列にドキュメントを生成します。メインのコンテキストを消費せず、大量のファイルに対して一貫したスタイルでドキュメントを追加できます。

## ファイル一覧

| ファイル | 説明 |
|---------|------|
| `.claude/agents/doc-generator.md` | ドキュメントとコメント生成の専用サブエージェント定義 |
| `prompts/batch-doc-generation.txt` | 指定ディレクトリ内の全ファイルにドキュメントを追加するプロンプト例 |
| `prompts/parallel-doc-generation.txt` | 複数ディレクトリを並列でドキュメント生成するプロンプト例 |
| `prompts/readme-generation.txt` | 各サブディレクトリにREADME.mdを自動生成するプロンプト例 |
| `prompts/quality-check.txt` | 生成されたドキュメントの品質チェックプロンプト例 |

## 使い方

```bash
# ドキュメント生成エージェントをプロジェクトに配置
cp -r .claude /path/to/your-project/

# 一括ドキュメント生成
> src/services/ ディレクトリ内の全TypeScriptファイルに
> ドキュメントコメントを追加してください

# 並列ドキュメント生成（複数ディレクトリ）
> 以下のディレクトリのドキュメントを並列で生成してください:
> 1. src/services/
> 2. src/utils/
> 3. src/models/

# README自動生成
> src/ 直下の各サブディレクトリにREADME.mdを生成してください
```

## ドキュメント規約

| 項目 | ルール |
|------|--------|
| 形式 | JSDoc/TSDoc形式 |
| 必須タグ | `@param`, `@returns`, `@throws` |
| コメントの焦点 | コードの動作ではなく「意図」を説明する |
| 既存コメント | 保持し、不足分のみ追加する |
| 対象外 | テストファイル、設定ファイル、自動生成ファイル |

## 設計のポイント

- **メインのコンテキストを消費しない**: ファイルの読み取りと編集はサブエージェントのコンテキスト内で完結する
- **permissionMode: acceptEdits**: ドキュメント追加は低リスクな操作のため、個別承認は不要
- **並列実行の安全性**: ディレクトリ単位で分割すればファイルの重複がなく安全
- **品質チェックの組み込み**: 生成後にTypeScriptの型チェックとテスト実行で既存機能への影響を確認する

## 関連レシピ

- レシピ62「並列実行で大規模コードベースを高速調査する」
- レシピ63「マルチファイルリファクタリングの自動化」
- レシピ66「サブエージェント駆動のコードレビュー」
